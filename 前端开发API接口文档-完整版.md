# ä¸ªäººç½‘ç«™åç«¯APIæ¥å£æ–‡æ¡£ - å‰ç«¯å¼€å‘æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸ªäººç½‘ç«™çš„åç«¯APIç³»ç»Ÿï¼Œæä¾›ç”¨æˆ·è®¤è¯ã€åˆ†ç±»ç®¡ç†å’Œç¬”è®°ç®¡ç†åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£ä¸“ä¸ºå‰ç«¯å¼€å‘è€…ç¼–å†™ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„æ¥å£ä¿¡æ¯å’Œä½¿ç”¨ç¤ºä¾‹ã€‚

## ğŸ”— åŸºç¡€ä¿¡æ¯

- **åŸºç¡€URL**: `http://localhost:8080` (å¼€å‘ç¯å¢ƒ)
- **APIç‰ˆæœ¬**: v1
- **è®¤è¯æ–¹å¼**: JWT Token
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8

## ğŸ” è®¤è¯è¯´æ˜

### JWT Token ä½¿ç”¨æ–¹æ³•

1. ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œåç«¯ä¼šè¿”å›JWT token
2. åœ¨åç»­è¯·æ±‚ä¸­ï¼Œéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦tokenï¼š
   ```
   Authorization: Bearer <your-jwt-token>
   ```

### éœ€è¦è®¤è¯çš„æ¥å£
- æ‰€æœ‰ `/api/v1/admin/*` è·¯å¾„ä¸‹çš„æ¥å£éƒ½éœ€è¦JWTè®¤è¯

## ğŸ“Š ç»Ÿä¸€å“åº”æ ¼å¼

### æˆåŠŸå“åº”æ ¼å¼
```json
{
  "code": 1008,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "detail": {
    // å…·ä½“æ•°æ®å†…å®¹
  }
}
```

### é”™è¯¯å“åº”æ ¼å¼
```json
{
  "code": 1009,
  "msg": "æŸ¥è¯¢å¤±è´¥",
  "detail": "è¯¦ç»†é”™è¯¯ä¿¡æ¯"
}
```

## ğŸ”‘ ç”¨æˆ·è®¤è¯æ¥å£

### 1. ç”¨æˆ·æ³¨å†Œ
- **æ¥å£**: `POST /api/v1/user/signup`
- **æè¿°**: æ–°ç”¨æˆ·æ³¨å†Œ
- **è®¤è¯**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç ",
  "re_password": "ç¡®è®¤å¯†ç ",
  "email": "é‚®ç®±åœ°å€",
  "gender": 1
}
```

**å­—æ®µè¯´æ˜**:
- `username`: ç”¨æˆ·å (å¿…å¡«)
- `password`: å¯†ç  (å¿…å¡«)
- `re_password`: ç¡®è®¤å¯†ç  (å¿…å¡«ï¼Œå¿…é¡»ä¸passwordç›¸åŒ)
- `email`: é‚®ç®±åœ°å€ (å¿…å¡«ï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆé‚®ç®±æ ¼å¼)
- `gender`: æ€§åˆ« (0=æœªçŸ¥, 1=ç”·, 2=å¥³)

**æˆåŠŸå“åº”** (1004):
```json
{
  "code": 1004,
  "msg": "æ³¨å†ŒæˆåŠŸ",
  "detail": {
    "user_id": 123456789
  }
}
```

**é”™è¯¯å“åº”**:
- `1000`: è¯·æ±‚å‚æ•°é”™è¯¯
- `1005`: æ³¨å†Œå¤±è´¥

### 2. ç”¨æˆ·ç™»å½•
- **æ¥å£**: `POST /api/v1/user/login`
- **æè¿°**: ç”¨æˆ·ç™»å½•è·å–JWT token
- **è®¤è¯**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç "
}
```

**æˆåŠŸå“åº” - æ™®é€šç”¨æˆ·** (1006):
```json
{
  "code": 1006,
  "msg": "ç™»å½•æˆåŠŸ",
  "detail": {
    "role": "æ™®é€šç”¨æˆ·",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**æˆåŠŸå“åº” - ç®¡ç†å‘˜** (1002):
```json
{
  "code": 1002,
  "msg": "ç®¡ç†å‘˜ç™»å½•",
  "detail": {
    "role": "ç®¡ç†å‘˜",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**é”™è¯¯å“åº”**:
- `1000`: è¯·æ±‚å‚æ•°é”™è¯¯
- `1007`: ç™»å½•å¤±è´¥

## ğŸ“ åˆ†ç±»ç®¡ç†æ¥å£

### 1. è·å–æ‰€æœ‰åˆ†ç±»
- **æ¥å£**: `GET /api/v1/admin/categories`
- **æè¿°**: è·å–æ‰€æœ‰åˆ†ç±»åˆ—è¡¨
- **è®¤è¯**: éœ€è¦JWT token

**æˆåŠŸå“åº”** (1008):
```json
{
  "code": 1008,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "detail": [
    {
      "id": 1,
      "name": "æŠ€æœ¯åˆ†äº«"
    },
    {
      "id": 2,
      "name": "ç”Ÿæ´»éšç¬”"
    }
  ]
}
```

**é”™è¯¯å“åº”**:
- `1010`: åˆ†ç±»ä¸ºç©º
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 2. è·å–å•ä¸ªåˆ†ç±»
- **æ¥å£**: `GET /api/v1/admin/categories/{id}`
- **æè¿°**: æ ¹æ®IDè·å–ç‰¹å®šåˆ†ç±»
- **è®¤è¯**: éœ€è¦JWT token

**è·¯å¾„å‚æ•°**:
- `id`: åˆ†ç±»ID (æ•´æ•°)

**æˆåŠŸå“åº”** (1008):
```json
{
  "code": 1008,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "detail": {
    "id": 1,
    "name": "æŠ€æœ¯åˆ†äº«"
  }
}
```

**é”™è¯¯å“åº”**:
- `1009`: æŸ¥è¯¢å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 3. åˆ›å»ºåˆ†ç±»
- **æ¥å£**: `POST /api/v1/admin/categories`
- **æè¿°**: åˆ›å»ºæ–°åˆ†ç±»
- **è®¤è¯**: éœ€è¦JWT token

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "æ–°åˆ†ç±»åç§°"
}
```

**æˆåŠŸå“åº”** (1013):
```json
{
  "code": 1013,
  "msg": "æ·»åŠ æˆåŠŸ",
  "detail": "æ·»åŠ æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
- `1014`: æ·»åŠ å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 4. æ›´æ–°åˆ†ç±»
- **æ¥å£**: `PUT /api/v1/admin/categories/{id}`
- **æè¿°**: æ›´æ–°æŒ‡å®šåˆ†ç±»çš„åç§°
- **è®¤è¯**: éœ€è¦JWT token

**è·¯å¾„å‚æ•°**:
- `id`: åˆ†ç±»ID (æ•´æ•°)

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "æ›´æ–°åçš„åˆ†ç±»åç§°"
}
```

**æˆåŠŸå“åº”** (1011):
```json
{
  "code": 1011,
  "msg": "æ›´æ–°æˆåŠŸ",
  "detail": "æ›´æ–°æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
- `1012`: æ›´æ–°å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 5. åˆ é™¤åˆ†ç±»
- **æ¥å£**: `DELETE /api/v1/admin/categories/{id}`
- **æè¿°**: åˆ é™¤æŒ‡å®šåˆ†ç±»ï¼ˆè½¯åˆ é™¤ï¼‰
- **è®¤è¯**: éœ€è¦JWT token

**è·¯å¾„å‚æ•°**:
- `id`: åˆ†ç±»ID (æ•´æ•°)

**æˆåŠŸå“åº”** (1015):
```json
{
  "code": 1015,
  "msg": "åˆ é™¤æˆåŠŸ",
  "detail": "åˆ é™¤æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
- `1016`: åˆ é™¤å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

## ğŸ“ ç¬”è®°ç®¡ç†æ¥å£

### 1. è·å–æ‰€æœ‰ç¬”è®°
- **æ¥å£**: `GET /api/v1/admin/notes`
- **æè¿°**: è·å–æ‰€æœ‰ç¬”è®°åˆ—è¡¨
- **è®¤è¯**: éœ€è¦JWT token

**æˆåŠŸå“åº”** (1019):
```json
{
  "code": 1019,
  "msg": "è·å–ç¬”è®°æˆåŠŸ",
  "detail": [
    {
      "id": "1",
      "author_name": "ä½œè€…ç”¨æˆ·å",
      "category_name": "åˆ†ç±»åç§°",
      "title": "ç¬”è®°æ ‡é¢˜",
      "contend_md": "Markdownæ ¼å¼å†…å®¹",
      "contend_html": "<p>HTMLæ ¼å¼å†…å®¹</p>",
      "status": 1,
      "create_at": "2024-01-01T10:00:00Z",
      "update_at": "2024-01-01T10:00:00Z"
    }
  ]
}
```

**é”™è¯¯å“åº”**:
- `1020`: è·å–ç¬”è®°å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 2. è·å–å•ä¸ªç¬”è®°
- **æ¥å£**: `GET /api/v1/admin/notes/{id}`
- **æè¿°**: æ ¹æ®IDè·å–ç‰¹å®šç¬”è®°
- **è®¤è¯**: éœ€è¦JWT token

**è·¯å¾„å‚æ•°**:
- `id`: ç¬”è®°ID (æ•´æ•°)

**æˆåŠŸå“åº”** (1021):
```json
{
  "code": 1021,
  "msg": "è·å–ä¸€åˆ™ç¬”è®°æˆåŠŸ",
  "detail": {
    "id": "1",
    "author_name": "ä½œè€…ç”¨æˆ·å",
    "category_name": "åˆ†ç±»åç§°",
    "title": "ç¬”è®°æ ‡é¢˜",
    "contend_md": "Markdownæ ¼å¼å†…å®¹",
    "contend_html": "<p>HTMLæ ¼å¼å†…å®¹</p>",
    "status": 1,
    "create_at": "2024-01-01T10:00:00Z",
    "update_at": "2024-01-01T10:00:00Z"
  }
}
```

**é”™è¯¯å“åº”**:
- `1022`: è·å–ä¸€åˆ™ç¬”è®°å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 3. åˆ›å»ºç¬”è®°
- **æ¥å£**: `POST /api/v1/admin/notes`
- **æè¿°**: åˆ›å»ºæ–°ç¬”è®°
- **è®¤è¯**: éœ€è¦JWT token

**è¯·æ±‚å‚æ•°**:
```json
{
  "title": "ç¬”è®°æ ‡é¢˜",
  "content_md": "# è¿™æ˜¯Markdownæ ¼å¼çš„å†…å®¹\n\nè¿™é‡Œæ˜¯æ­£æ–‡...",
  "category_id": 1,
  "status": 1
}
```

**å­—æ®µè¯´æ˜**:
- `title`: ç¬”è®°æ ‡é¢˜ (å¿…å¡«)
- `content_md`: Markdownæ ¼å¼å†…å®¹ (å¿…å¡«)
- `category_id`: åˆ†ç±»ID (å¿…å¡«)
- `status`: çŠ¶æ€ (0=è‰ç¨¿, 1=å‘å¸ƒ)

**æˆåŠŸå“åº”** (1017):
```json
{
  "code": 1017,
  "msg": "æ·»åŠ ç¬”è®°æˆåŠŸ",
  "detail": {
    "id": "1",
    "author_name": "ä½œè€…ç”¨æˆ·å",
    "category_name": "åˆ†ç±»åç§°",
    "title": "ç¬”è®°æ ‡é¢˜",
    "contend_md": "Markdownæ ¼å¼å†…å®¹",
    "contend_html": "<h1>è¿™æ˜¯Markdownæ ¼å¼çš„å†…å®¹</h1><p>è¿™é‡Œæ˜¯æ­£æ–‡...</p>",
    "status": 1,
    "create_at": "2024-01-01T10:00:00Z",
    "update_at": "2024-01-01T10:00:00Z"
  }
}
```

**é”™è¯¯å“åº”**:
- `1018`: æ·»åŠ ç¬”è®°å¤±è´¥
- `1003`: è¯·æ±‚å¤´ä¸­å¤´éƒ¨éªŒè¯å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 4. æ›´æ–°ç¬”è®°
- **æ¥å£**: `PUT /api/v1/admin/notes/{id}`
- **æè¿°**: æ›´æ–°æŒ‡å®šç¬”è®°
- **è®¤è¯**: éœ€è¦JWT token

**è·¯å¾„å‚æ•°**:
- `id`: ç¬”è®°ID (æ•´æ•°)

**è¯·æ±‚å‚æ•°** (æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„):
```json
{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "content_md": "æ›´æ–°åçš„Markdownå†…å®¹",
  "category_id": 2,
  "status": 1
}
```

**æˆåŠŸå“åº”** (1025):
```json
{
  "code": 1025,
  "msg": "æ›´æ–°ç¬”è®°æˆåŠŸ",
  "detail": "æ›´æ–°æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
- `1026`: æ›´æ–°ç¬”è®°å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

### 5. åˆ é™¤ç¬”è®°
- **æ¥å£**: `DELETE /api/v1/admin/notes/{id}`
- **æè¿°**: åˆ é™¤æŒ‡å®šç¬”è®°ï¼ˆè½¯åˆ é™¤ï¼‰
- **è®¤è¯**: éœ€è¦JWT token

**è·¯å¾„å‚æ•°**:
- `id`: ç¬”è®°ID (æ•´æ•°)

**æˆåŠŸå“åº”** (1023):
```json
{
  "code": 1023,
  "msg": "åˆ é™¤ç¬”è®°æˆåŠŸ",
  "detail": "åˆ é™¤æˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
- `1024`: åˆ é™¤ç¬”è®°å¤±è´¥
- `1001`: æœåŠ¡å™¨ç¹å¿™

## ğŸ“‹ æ•°æ®æ¨¡å‹

### RegisterParam (æ³¨å†Œå‚æ•°)
```typescript
interface RegisterParam {
  username: string;     // ç”¨æˆ·å (å¿…å¡«)
  password: string;     // å¯†ç  (å¿…å¡«)
  re_password: string;  // ç¡®è®¤å¯†ç  (å¿…å¡«ï¼Œå¿…é¡»ä¸passwordç›¸åŒ)
  email: string;        // é‚®ç®± (å¿…å¡«ï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆé‚®ç®±æ ¼å¼)
  gender: number;       // æ€§åˆ« (0=æœªçŸ¥, 1=ç”·, 2=å¥³)
}
```

### LoginParam (ç™»å½•å‚æ•°)
```typescript
interface LoginParam {
  username: string;     // ç”¨æˆ·å (å¿…å¡«)
  password: string;     // å¯†ç  (å¿…å¡«)
}
```

### CategoryName (åˆ†ç±»å‚æ•°)
```typescript
interface CategoryName {
  name: string;         // åˆ†ç±»åç§° (å¿…å¡«)
}
```

### CategoriesParam (åˆ†ç±»å“åº”)
```typescript
interface CategoriesParam {
  id: number;           // åˆ†ç±»ID
  name: string;         // åˆ†ç±»åç§°
}
```

### CreateNoteParam (åˆ›å»ºç¬”è®°å‚æ•°)
```typescript
interface CreateNoteParam {
  title: string;        // æ ‡é¢˜ (å¿…å¡«)
  content_md: string;   // Markdownå†…å®¹ (å¿…å¡«)
  category_id: number;  // åˆ†ç±»ID (å¿…å¡«)
  status: number;       // çŠ¶æ€ (0=è‰ç¨¿, 1=å‘å¸ƒ)
}
```

### UpdateNoteParam (æ›´æ–°ç¬”è®°å‚æ•°)
```typescript
interface UpdateNoteParam {
  title?: string;       // æ ‡é¢˜ (å¯é€‰)
  content_md?: string;  // Markdownå†…å®¹ (å¯é€‰)
  category_id?: number; // åˆ†ç±»ID (å¯é€‰)
  status?: number;      // çŠ¶æ€ (å¯é€‰ï¼Œ0=è‰ç¨¿, 1=å‘å¸ƒ)
}
```

### NoteResponse (ç¬”è®°å“åº”)
```typescript
interface NoteResponse {
  id: string;           // ç¬”è®°ID (å­—ç¬¦ä¸²æ ¼å¼)
  author_name: string;  // ä½œè€…ç”¨æˆ·å
  category_name: string; // åˆ†ç±»åç§°
  title: string;        // æ ‡é¢˜
  contend_md: string;   // Markdownå†…å®¹
  contend_html: string; // HTMLå†…å®¹
  status: number;       // çŠ¶æ€ (0=è‰ç¨¿, 1=å‘å¸ƒ)
  create_at: string;    // åˆ›å»ºæ—¶é—´
  update_at: string;    // æ›´æ–°æ—¶é—´
}
```

## ğŸš¨ çŠ¶æ€ä»£ç è¯´æ˜

| çŠ¶æ€ä»£ç  | è¯´æ˜ |
|---------|------|
| 1000 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 1001 | æœåŠ¡å™¨ç¹å¿™ |
| 1002 | ç®¡ç†å‘˜ç™»å½• |
| 1003 | è¯·æ±‚å¤´ä¸­å¤´éƒ¨éªŒè¯å¤±è´¥ |
| 1004 | æ³¨å†ŒæˆåŠŸ |
| 1005 | æ³¨å†Œå¤±è´¥ |
| 1006 | ç™»å½•æˆåŠŸ |
| 1007 | ç™»å½•å¤±è´¥ |
| 1008 | æŸ¥è¯¢æˆåŠŸ |
| 1009 | æŸ¥è¯¢å¤±è´¥ |
| 1010 | åˆ†ç±»ä¸ºç©º |
| 1011 | æ›´æ–°æˆåŠŸ |
| 1012 | æ›´æ–°å¤±è´¥ |
| 1013 | æ·»åŠ æˆåŠŸ |
| 1014 | æ·»åŠ å¤±è´¥ |
| 1015 | åˆ é™¤æˆåŠŸ |
| 1016 | åˆ é™¤å¤±è´¥ |
| 1017 | æ·»åŠ ç¬”è®°æˆåŠŸ |
| 1018 | æ·»åŠ ç¬”è®°å¤±è´¥ |
| 1019 | è·å–ç¬”è®°æˆåŠŸ |
| 1020 | è·å–ç¬”è®°å¤±è´¥ |
| 1021 | è·å–ä¸€åˆ™ç¬”è®°æˆåŠŸ |
| 1022 | è·å–ä¸€åˆ™ç¬”è®°å¤±è´¥ |
| 1023 | åˆ é™¤ç¬”è®°æˆåŠŸ |
| 1024 | åˆ é™¤ç¬”è®°å¤±è´¥ |
| 1025 | æ›´æ–°ç¬”è®°æˆåŠŸ |
| 1026 | æ›´æ–°ç¬”è®°å¤±è´¥ |

## ğŸ’¡ å‰ç«¯å¼€å‘å»ºè®®

### 1. çŠ¶æ€ç®¡ç†
å»ºè®®ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxã€Zustandç­‰ï¼‰æ¥ç®¡ç†ï¼š
- ç”¨æˆ·ç™»å½•çŠ¶æ€
- JWT token
- å½“å‰ç”¨æˆ·ä¿¡æ¯

### 2. HTTPè¯·æ±‚å°è£…
å»ºè®®å°è£…HTTPè¯·æ±‚åº“ï¼Œè‡ªåŠ¨å¤„ç†ï¼š
- JWT tokenæ·»åŠ 
- é”™è¯¯å“åº”å¤„ç†
- è¯·æ±‚/å“åº”æ‹¦æˆª

### 3. é”™è¯¯å¤„ç†
æ ¹æ®è¿”å›çš„çŠ¶æ€ä»£ç ï¼Œæä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤ºã€‚

### 4. Markdownæ¸²æŸ“
å‰ç«¯å¯ä»¥ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„HTMLå†…å®¹ï¼Œæˆ–è€…ä½¿ç”¨Markdownæ¸²æŸ“åº“å¤„ç†MDå†…å®¹ã€‚

### 5. æ•°æ®ç±»å‹æ³¨æ„äº‹é¡¹
- ç¬”è®°IDåœ¨å“åº”ä¸­æ˜¯å­—ç¬¦ä¸²æ ¼å¼ï¼Œä½†åœ¨è·¯å¾„å‚æ•°ä¸­æ˜¯æ•´æ•°
- æ€§åˆ«å­—æ®µæ˜¯æ•°å­—ç±»å‹ (0/1/2)
- ç¬”è®°çŠ¶æ€æ˜¯æ•°å­—ç±»å‹ (0/1)

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### å¯åŠ¨åç«¯æœåŠ¡
```bash
cd d:\å­¦ä¹ æ–‡ä»¶å¤¹\Golang\é¡¹ç›®\HQ
go run main.go
```

### Swaggeræ–‡æ¡£
è®¿é—® `http://localhost:8080/swagger/index.html` æŸ¥çœ‹åœ¨çº¿APIæ–‡æ¡£ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»åç«¯å¼€å‘è€…æˆ–æŸ¥çœ‹é¡¹ç›®READMEæ–‡ä»¶ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ  
**é€‚ç”¨å‰ç«¯æ¡†æ¶**: React, Vue, Angular ç­‰